<odoo>
  <data>
    <!-- explicit list view definition -->

    <record model="ir.ui.view" id="dinner_book_pro.list">
      <field name="name">dinner_book_pro list</field>
      <field name="model">dinner.book.pro</field>
      <field name="arch" type="xml">
        <list>
            <field name="sn_no"/>
            <field name="user"/>
            <field name="status"/>
            <field name="total_price"/>
        </list>
      </field>
    </record>

    <record id="view_account_form" model="ir.ui.view">
            <field name="name">我要订餐</field>
            <field name="model">dinner.book.pro</field>
            <field name="arch" type="xml">
                <form string="订餐">
                    <header>
                        <button name="submit" type="object" string="提交" class="btn-primary" invisible="status != 'draft'"/>
                        <button name="revoke" type="object" string="撤回" class="btn-primary" invisible="status != 'book'"/>
                        <button name="cancel" type="object" string="取消" class="btn-primary" invisible="status != 'book'"/>
                        <field name="status" widget="statusbar" options="{'clickable': '1'}"/>
                    </header>
                <sheet>
<!--                    <div class="oe_title">-->
<!--                        <h5>-->
<!--                            <font color="green">温馨提示:请及时订餐，中餐需要个人自费￥20.00，晚餐免费提供给加班到晚上8点的员工！</font>-->
<!--                        </h5>-->
<!--                    </div>-->
                    <div>
                        <field name="pay_status" invisible="1"/>
                        <widget name="web_ribbon" title="待支付" bg_color="text-bg-danger" invisible="pay_status != 'unpaid'"/>
                        <widget name="web_ribbon" title="已支付" bg_color="text-bg-success" invisible="pay_status != 'paid'"/>
                        <widget name="web_ribbon" title="无需支付" bg_color="text-bg-secondary" invisible="pay_status != 'not_pay'"/>
                    </div>
<!--                    <h2 style="font-size: 1.9rem;">-->
                        <group name="订餐详情">
<!--                                    <div class="col col-md-8">-->
                            <group cols="2">
                                <field name="sn_no" readonly="1"/>
                                <field name="user" readonly="1"/>
                                <field name="total_price" readonly="1"/>
                            </group>
                        </group>
<!--                    </h2>-->


                    <notebook>
                    <page string="订餐明细" name="dinner book Line">
                        <field
                            name="book_line"
                            widget="sol_o2m"
                            mode="list"
                            readonly="status != 'draft'">

                            <list
                                string="Dinner Book Lines"
                                editable="bottom"
                                decoration-danger="price > 0"
                                limit="200"
                            >
                                <!-- Others fields -->
                                <field name="book_date" required="1"/>
                                <field name="book_option" required="1" />
                                <field name="shop_id" required="1" options="{'no_quick_create': True}" />
                                <field name="meat" required="1" options="{'no_quick_create': True}" context="{'shop_id': shop_id}"/>
                                <field name="vegetables" required="1" options="{'no_quick_create': True}" context="{'shop_id': shop_id}"/>
                                <field name="drink" required="1" options="{'no_quick_create': True}" context="{'shop_id': shop_id}"/>
                                <field name="price" readonly="1" force_save="1"/>
                            </list>
                        </field>
                    </page>
                    </notebook>
                </sheet>

                    <!-- Chatter -->
                    <chatter/>
                </form>
            </field>
        </record>

   <record model="ir.ui.view" id="dinner_goods_list">
      <field name="name">菜品列表</field>
      <field name="model">dinner.goods</field>
      <field name="arch" type="xml">
        <list editable="bottom">
          <field name="shop_id"/>
          <field name="category"/>
          <field name="goods_name"/>
        </list>
      </field>
    </record>

<!--      <record model="ir.ui.view" id="dinner_goods_list">-->
<!--      <field name="name">菜品列表</field>-->
<!--      <field name="model">dinner.goods</field>-->
<!--      <field name="arch" type="xml">-->
<!--        <list editable="bottom">-->
<!--          <field name="category"/>-->
<!--          <field name="goods_name"/>-->
<!--        </list>-->
<!--      </field>-->
<!--    </record>-->

  <record model="ir.ui.view" id="res_shop_list">
      <field name="name">菜品列表</field>
      <field name="model">res.shop</field>
      <field name="arch" type="xml">
        <list editable="bottom">
          <field name="name"/>
          <field name="goods_ids" widget="one2many"/>
        </list>
      </field>
    </record>
    <!-- actions opening views on models -->

    <record model="ir.actions.act_window" id="dinner_book_pro_action_window">
      <field name="name">我要订餐</field>
      <field name="res_model">dinner.book.pro</field>
      <field name="view_mode">list,form</field>
    </record>

  <record model="ir.actions.act_window" id="res_shop_action_window">
      <field name="name">商家信息设置</field>
      <field name="res_model">res.shop</field>
      <field name="view_mode">list</field>
    </record>

    <record model="ir.actions.act_window" id="dish_goods_action_window">
      <field name="name">菜品设置</field>
      <field name="res_model">dinner.goods</field>
      <field name="view_mode">list</field>
    </record>
    <!-- server action to the one above -->

    <record model="ir.actions.server" id="dinner_book_pro.action_server">
      <field name="name">dinner_book_pro server</field>
      <field name="model_id" ref="model_dinner_book_pro"/>
      <field name="state">code</field>
      <field name="code">
        action = {
          "type": "ir.actions.act_window",
          "view_mode": "list,form",
          "res_model": model._name,
        }
      </field>
    </record>


    <!-- Top menu item -->

    <menuitem name="明理订餐" id="dinner_book_pro.menu_root" groups="base.group_user"/>

    <!-- menu categories -->
    <menuitem name="订餐" id="dinner_book_pro_order" parent="dinner_book_pro.menu_root" groups="base.group_user" sequence="10"/>
    <menuitem name="设置" id="dinner_book_pro_setting" parent="dinner_book_pro.menu_root" sequence="20"/>

    <!-- actions -->

    <menuitem name="订餐" id="dinner_book" parent="dinner_book_pro_order"
              action="dinner_book_pro_action_window" groups="base.group_user"/>

    <menuitem name="商家信息设置" id="res_shop_setting" parent="dinner_book_pro_setting"
              action="res_shop_action_window" groups="dinner_book_pro.group_dinner_manager"/>
    <menuitem name="菜品设置" id="dish_goods_setting" parent="dinner_book_pro_setting"
              action="dish_goods_action_window" groups="dinner_book_pro.group_dinner_manager"/>
  </data>
</odoo>
